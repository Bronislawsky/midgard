# ====================================
# midgard.conf.template â€” Global configuration
# ====================================
# Copy this file to midgard.conf and fill the values.
# midgard.conf itself should be in .gitignore (never committed).

# --- Runtime user & permissions ---
RUN_AS_USER="USER"           # Enforced by preflight (ownership)
RUN_AS_GROUP="GROUP"         # Group ownership
UMASK="077"                  # Default file mode mask (restrictive)

# --- Binary paths ---
MYSQL_BIN="/usr/bin/mysql"
RSYNC_BIN="/usr/bin/rsync"
RESTIC_BIN="/usr/local/bin/restic"
FRESHCLAM="/usr/bin/freshclam"
CLAMDSCAN_BIN="/usr/bin/clamdscan"
WORDFENCE_BIN="/home/USER/.local/bin/wordfence"
WEASYPRINT_BIN="/home/USER/.local/bin/weasyprint"
MALDET_BIN="/usr/local/sbin/maldet"
TAR_BIN="/usr/bin/tar"
GPG_BIN="/usr/bin/gpg"

# --- Updates ---
FRESHCLAM_UPDATE="y"         # Run freshclam before scans (best effort)

# --- Logging & retention ---
LOG_RETENTION_DAYS=14        # Days to keep logs/reports
LOG_ROTATE_COPIES=7          # Max rotated copies per site log
VERBOSITY="verbose"          # quiet|normal|verbose (console only)

# --- Reliability ---
DEFAULT_RETRIES=3            # Retries for rsync/mysql/restic
DEFAULT_RETRY_BACKOFF_SECS=5 # Backoff between retries (seconds)

# --- Reporting ---
REPORTING_ENABLE="y"         # Master switch
GLOBAL_REPORT_RECIPIENTS="admin@example.com"

# SMTP settings (for reports)
SMTP_HOST="smtp.example.com"
SMTP_PORT=587
SMTP_USER="midgard@example.com"
SMTP_PASS="CHANGE-ME"        # Replace in midgard.conf, not in template
SMTP_FROM="midgard <midgard@example.com>"
SMTP_TLS="y"                 # Use TLS (y/n)

# --- Per site preset
PRESET_LOCAL_SYNC_PATH="/preset/in/midgard/conf/"
PRESET_LOCAL_ARCHIVE_PATH="/preset/out/midgard/conf/"
